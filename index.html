<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>frame.899 — cyprus art collective</title>
<meta name="description" content="frame.899 — poetic multimedia installations from Cyprus"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<link rel="stylesheet" href="assets/liquid.css">
<style>
:root{
  --bg:#0b0b0b; --fg:#e9e9e9; --muted:#a6a6a6; --rule:#1a1a1a;
  --glass-bg:rgba(10,10,12,.28); --glass-brd:rgba(255,255,255,.1);
  --max:1120px; --icon:40px; --icon-m:36px; --pad:20px;
}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--fg);font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;line-height:1.6;-webkit-font-smoothing:antialiased}
a{color:var(--fg);text-decoration:none;border-bottom:1px solid transparent}
a:hover{border-color:var(--fg)}
.wrap{max-width:var(--max);margin:0 auto;padding:20px var(--pad);position:relative;z-index:1;pointer-events:none}

/* HEADER */
header,main{pointer-events:auto}
header{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:16px}
.h-left{justify-self:start}
.logo-wrap{display:flex;flex-direction:column;line-height:1}
.logo{font-weight:800;letter-spacing:.01em;font-size:20px}
.kicker{font-size:12px;color:var(--muted);letter-spacing:.12em;text-transform:uppercase;font-weight:600;margin-top:8px}
nav{justify-self:center}
nav a{font-weight:500;line-height:1.1;margin:0 10px}
.lang{justify-self:end;display:flex;gap:8px}
.lang button{
  display:flex;align-items:center;justify-content:center;
  height:32px; min-width:44px; padding:0 10px;
  background:transparent; border:1px solid var(--glass-brd); color:var(--fg);
  border-radius:8px; cursor:pointer; font-weight:500; line-height:1;
}
.lang .is-active{background:rgba(255,255,255,.06)}

/* Burger Menu */
.burger-btn {
  display: none;
  position: absolute;
  top: 20px;
  right: 20px; }
.burger-close-btn {
  position: absolute;
  top: 20px;
  right: 20px;
  background: transparent;
  border: none;
  cursor: pointer;
}
.burger-menu-panel {
  display: none;
  position: fixed;
  top: 0;
  right: -100%;
  width: 300px;
  height: 150%;
  background: var(--glass-bg);
  backdrop-filter: blur(14px) saturate(160%);
  border-left: 1px solid var(--glass-brd);
  z-index: 100;
  transition: right 1s ease;
  padding: 60px 20px;
}
.burger-menu-panel.show {
  display: block;
  right: 0;
}
.burger-nav {
  display: flex;
  flex-direction: column;
  gap: 16px;
}
.burger-nav a {
  font-size: 18px;
  font-weight: 500;
}
.lang-switch-mobile {
  margin-top: 30px;
  display: flex;
  flex-direction: row;
  gap: 16px;
  padding: 0px 4px;
}
.lang-switch-mobile button {
  background: transparent;
  border: none;
  color: var(--muted);
  font-size: 18px;
  font-weight: 500;
  cursor: pointer;
}
.lang-switch-mobile button.is-active {
  color: var(--fg);
  font-weight: 700;
}

/* HERO */
.hero{padding:48px 0 20px}
h1{font-size:44px;line-height:1.18;margin:.4rem 0 18px 0;font-weight:700}
.slider{position:relative;overflow:hidden;border-radius:16px;border:1px solid var(--rule);background:#0d0d0f}
.slides{display:flex;transition:transform 1s ease}
.slide{min-width:100%;height:62vw;max-height:560px;position:relative;display:flex;align-items:flex-end;background:#0d0d0f}
.slide img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
.slide .meta{position:absolute;left:var(--pad);bottom:var(--pad);padding:10px 12px;border-radius:12px;background:rgba(0,0,0,.35);backdrop-filter:blur(10px);border:1px solid var(--glass-brd)}
.slide h3{margin:0;font-size:16px}
.slide p{margin:4px 0 0;color:#d0d0d0;font-size:14px}
.hnav{position:absolute;inset:0;display:flex;align-items:center;justify-content:space-between;pointer-events:none;padding:0 var(--pad)}
.iconbtn{pointer-events:auto;background:rgba(0,0,0,.45);border:1px solid rgba(255,255,255,.2);width:var(--icon);height:var(--icon);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center}
.icon{width:24px;height:24px;stroke:#eee;fill:none;stroke-width:1.75;stroke-linecap:round;stroke-linejoin:round}
.hero-dots{display:flex;gap:8px;justify-content:center;align-items:center;margin:12px 0 0}
.hero-dots button,.m-dots button{width:8px;height:8px;border-radius:50%;border:0;background:#3a3a3a;cursor:pointer}
.hero-dots .active,.m-dots .active{background:#e5e5e5}
.hero-dots {
  isolation: isolate;
}

/* GRID */
section{padding:28px 0;border-top:0px solid var(--rule)}
h2{font-size:16px;letter-spacing:.08em;text-transform:uppercase;margin:4 0 10px;color:#eaeaea}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}
.card{border:1px solid var(--glass-brd);border-radius:14px;overflow:hidden;background:var(--glass-bg);backdrop-filter:blur(8px) saturate(140%);cursor:pointer}
.thumb{aspect-ratio:16/10;position:relative}
.thumb img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
.meta2{padding:8px 12px;color:#cfcfcf}
.meta2 h3{margin:0 0 4px}
.meta2 p{margin:0;color:var(--muted)}

/* MODAL — обновленная версия (fit-to-popup, NO CROP) */
#overlay{
  position:fixed; inset:0; z-index:50;
  background:rgba(8,8,10,.55);
  display:none;
}
#overlay.show{ display:block }

.modal{
  position:relative;
  width:min(95vw,1400px);
  height:min(95vh,900px);
  margin:2.5vh auto;
  border-radius:18px;
  border:1px solid var(--glass-brd);
  overflow:hidden;
  background:var(--glass-bg);
  display:grid;
  grid-template-columns:minmax(520px,1.35fr) minmax(360px,1fr);
}
.m-media .m-title-container { display: none; }

.modal::before{
  content:""; position:absolute; inset:0; z-index:0;
  backdrop-filter:blur(14px) saturate(160%);
  pointer-events:none;
}

.m-close,.m-nav .prev,.m-nav .next,.fs-btn{
  background:rgba(0,0,0,.45);
  border:1px solid rgba(255,255,255,.22);
  width:var(--icon); height:var(--icon);
  border-radius:50%; display:flex; align-items:center; justify-content:center;
  cursor:pointer; z-index:3;
}
.m-close{ position:absolute; top:10px; right:12px }

/* LEFT: media column */
.m-media {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;

  /* фон как у правой части */
  background: var(--glass-bg);
  backdrop-filter: blur(14px) saturate(160%);
  border-right: 1px solid var(--glass-brd);
}

/* мягкий фоновый слой для гармонии */
.m-media::before {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--glass-bg);
  backdrop-filter: blur(18px) saturate(180%);
  opacity: 0.8;
  z-index: 0;
}

/* контейнер изображения */
.viewport {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

/* базовые стили */
.viewport img,
.viewport video {
  position: absolute;
  inset: 0;
  margin: auto;
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  opacity: 0;
  transform: translateX(0);
  transition: none;
  z-index: 1;
}

/* активный кадр (на экране) */
.viewport .media-active {
  opacity: 1;
  z-index: 2;
  transition: opacity 0.6s ease, transform 0.6s ease, filter 0.6s ease;
  filter: brightness(1);
}

/* уходящий кадр */
.viewport .media-leave-left {
  opacity: 0;
  transform: translateX(-8%) scale(0.98);
  filter: brightness(0.4);
  transition: opacity 0.6s ease, transform 0.6s ease, filter 0.6s ease;
}

.viewport .media-leave-right {
  opacity: 0;
  transform: translateX(8%) scale(0.98);
  filter: brightness(0.4);
  transition: opacity 0.6s ease, transform 0.6s ease, filter 0.6s ease;
}

/* приходящий кадр */
.viewport .media-enter-left {
  opacity: 0;
  transform: translateX(-8%) scale(1.02);
  filter: brightness(0.4);
}

.viewport .media-enter-right {
  opacity: 0;
  transform: translateX(8%) scale(1.02);
  filter: brightness(0.4);
}

/* активируем появление */
.viewport .media-enter-left.active,
.viewport .media-enter-right.active {
  opacity: 1;
  transform: translateX(0) scale(1);
  filter: brightness(1);
  transition: opacity 0.6s ease, transform 0.6s ease, filter 0.6s ease;
}


/* навигация */
.m-nav {
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  transform: translateY(-50%);
  display: flex;
  justify-content: space-between;
  padding: 0 var(--pad);
  z-index: 2;
}

.fs-btn {
  position: absolute;
  bottom: 10px;
  right: 12px;
}



/* RIGHT: text + thumbs */
.m-meta {
  position: relative;
  padding: 20px 20px 14px; /* убрали боковые отступы */
  display: flex;
  flex-direction: column;
  gap: 10px;
  z-index: 1;
  overflow: hidden;
}

.m-meta .m-scroll-wrapper {
  flex-grow: 1;
  overflow-y: auto;
}

.m-meta h3 {
  margin: 0;
}

.m-sub {
  margin: 0;
  color: #bdbdbd;
  font-size: 14px;
}

.m-desc,
.m-stmt {
  color: #e0e0e0;
  font-size: 15px;
}

/* text wrapping */
.m-desc p,
.m-stmt p {
  max-width: 66ch;
  margin: 0;
  hyphens: auto;
  overflow-wrap: break-word;
  word-break: normal;
  text-wrap: pretty;
}

/* thumbs */
.m-thumbs {
  display: flex;
  justify-content: flex-start;
  align-items: stretch;
  gap: 10px;
  overflow-x: auto;
  padding: 0 20px; /* симметрия, без зазора у краёв модалки */
  margin: 0;
  scroll-padding: 0;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.m-thumbs::-webkit-scrollbar {
  display: none;
}


.m-thumbs img{
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;          /* или fill — уже не важно, поля уйдут */
}
.m-thumbs button {
  position: relative;
  padding: 0;
  line-height: 0;
  appearance: none;
  -webkit-appearance: none;
  border: 1px solid var(--glass-brd);
  border-radius: 6px;
  overflow: hidden;
  background: #111;
  width: 78px;
  height: 58px;
  flex: 0 0 auto;
  display: block;
  box-sizing: border-box;
}

.m-thumbs button::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  transition: box-shadow 0.25s ease;
  box-shadow: none; /* ← по умолчанию тени нет */
}

.m-thumbs button.is-active::after {
  box-shadow: inset 0 0 18px rgba(255,255,255,0.55);
}



/* dots */
.m-dots {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  gap: 8px;
  padding: 0 20px;
  margin-top: 8px;
}

.m-dots button {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  border: 0;
  background: #3a3a3a;
  cursor: pointer;
}

.m-dots .active {
  background: #e5e5e5;
}


/* ABOUT + CONTACTS */
.about{display:grid;grid-template-columns:1fr 1fr;gap:20px}
.contacts-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px}

@media (max-width:900px){
  header nav, header .lang { display: none; }
  .burger-btn {
    display: flex;
    grid-column: 3;
    grid-row: 1;
    justify-self: end;
    background: transparent;
    border: none;
    cursor: pointer;
  }
  .grid,.about,.contacts-grid{grid-template-columns:1fr}
  .iconbtn,.m-close,.fs-btn{width:var(--icon-m);height:var(--icon-m)}
  h1{font-size:36px}
  .hero{padding-top:36px}
  .modal {
    grid-template-columns: 1fr;
    width: 100vw;
    height: 100dvh;
    margin: 0;
    border-radius: 0;
    display: flex;
    flex-direction: column;
  }
  .modal .viewport {
    align-items: start;
  }
  .modal .m-media {
    order: 1;
    position: relative;
    height: auto;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
  }
  .modal .m-media .viewport {
    order: 1;
  }
  .modal .m-media .m-nav {
    order: 2;
  }
  .modal .m-meta {
    order: 2;
    height: auto;
    flex-grow: 1;
    padding-top: 8px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  .modal .m-meta > h3, .modal .m-meta > .m-sub {
    padding: 0 6px;
    margin: 0 0 6px 0;
  }
  .modal .m-thumbs {
    order: 2;
    padding: 0 8px;
    margin-bottom: 0px;
    background: transparent;
    flex-shrink: 0;
  }
  .modal .m-thumbs button {
    width: 50px;
    height: 43px;
  }
  .modal .m-scroll-wrapper {
    order: 3;
    flex-grow: 1;
    overflow-y: auto;
    padding: 0 10px 0px;
  }
  .modal .m-dots {
    display: none;
  }
}
.to-top-btn {
  display: none;
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 100;
}

@media (max-width: 900px) {
  .to-top-btn {
    display: flex;
  }
}
</style>
</head>
<body>
<div id="burger-menu-panel" class="burger-menu-panel">
  <button id="burger-close-btn" class="burger-close-btn">
    <svg class="icon" viewBox="0 0 24 24" style="stroke: #fff;">
      <path d="M6 6l12 12M6 18l12-12"/>
    </svg>
  </button>
  <nav class="burger-nav">
    <a href="#projects" data-i18n="nav.projects">Projects</a>
    <a href="#collabs" data-i18n="nav.collabs">Collabs</a>
    <a href="#about" data-i18n="nav.about">About</a>
    <a href="#contacts" data-i18n="nav.contacts">Contacts</a>
  </nav>
  <div class="lang-switch-mobile">
    <button id="enBtnMobile" class="is-active">EN</button>
    <button id="ruBtnMobile">RU</button>
  </div>
</div>
<div id="liquid-ether-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;"></div>
<div class="wrap">
  <header>
    <div class="h-left">
      <div class="logo-wrap">
        <div class="logo">frame<b>899</b></div>
        <div class="kicker" data-i18n="kicker">CYPRUS ART COLLECTIVE</div>
      </div>
    </div>
    <nav>
      <a href="#projects" data-i18n="nav.projects">Projects</a>
      <a href="#collabs" data-i18n="nav.collabs">Collabs</a>
      <a href="#about" data-i18n="nav.about">About</a>
      <a href="#contacts" data-i18n="nav.contacts">Contacts</a>
    </nav>
    <div class="lang">
      <button id="enBtn" class="is-active">EN</button>
      <button id="ruBtn">RU</button>
    </div>
    <button id="burger-btn" class="burger-btn">
      <svg class="icon" viewBox="0 0 24 24">
        <path d="M3 12h18M3 6h18M3 18h18"/>
      </svg>
    </button>
  </header>

  <main>
    <div class="hero">
      <h1 data-i18n="h1">Art, experiments, sea breeze.</h1>

      <!-- HERO -->
      <div class="slider">
        <div class="slides" id="slides"></div>
        <div class="hnav">
          <button id="hPrev" class="iconbtn" aria-label="Previous">
            <svg class="icon" viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
          </button>
          <button id="hNext" class="iconbtn" aria-label="Next">
            <svg class="icon" viewBox="0 0 24 24"><path d="M9 6l6 6-6 6"/></svg>
          </button>
        </div>
      </div>
      <div class="hero-dots" id="hdots" aria-label="hero pagination"></div>
    </div>

    <!-- PROJECTS -->
    <section id="projects">
      <h2 data-i18n="projects.title">Projects</h2>
      <div class="grid" id="grid-projects"></div>
    </section>

    <!-- COLLABS -->
    <section id="collabs">
      <h2 data-i18n="collabs.title">Collabs</h2>
      <div class="grid" id="grid-collabs"></div>
    </section>

    <!-- ABOUT -->
    <section id="about">
      <h2 data-i18n="about.title">About</h2>
      <div class="about">
        <div>
          <h3>Kristina Kubrina</h3>
          <p data-i18n="about.kristina">
            Production director & media artist (Cyprus). Experience includes FIFA World Cup (Closing),
            AFC Asian Cup (Opening), The Weeknd tour, Robert Wun, Phillip Lim, Milan Design Week.
            Blends artistic vision with production rigor: visual systems, site adaptation, and show planning.
          </p>
        </div>
        <div>
          <h3>Ivan Maksimov</h3>
          <p data-i18n="about.ivan">
            CG artist & architect. Spatial visualization, scene readability, integration of media into architecture.
            Focus on interactivity and light-based installations.
          </p>
        </div>
      </div>
      <p class="muted" data-i18n="about.note" style="margin-top:8px">
        Some listed large-scale works were done as part of previous teams; media not published due to IP rights.
      </p>
    </section>

    <!-- CONTACTS -->
    <section id="contacts">
      <h2 data-i18n="contacts.title">Contacts</h2>
      <div class="contacts-grid">
        <div>
          <p class="muted" data-i18n="contacts.loc">Base: Cyprus, Limassol</p>
          <p>Email: <a href="mailto:hello@frame899.com">hello@frame899.com</a></p>
          <p>Instagram: <a href="https://instagram.com/" target="_blank" rel="noopener">instagram.com/<span class="muted">[handle]</span></a></p>
          <p>TikTok: <a href="https://tiktok.com/@" target="_blank" rel="noopener">tiktok.com/@<span class="muted">[handle]</span></a></p>
        </div>
        <div><p class="muted" data-i18n="contacts.press">Press / deck — on request.</p></div>
      </div>
    </section>
  </main>
</div>

<!-- MODAL -->
<div id="overlay" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="m-title">
    <button class="m-close" aria-label="Close"><svg class="icon" viewBox="0 0 24 24"><path d="M6 6l12 12M6 18l12-12"/></svg></button>

    <!-- LEFT: media -->
    <div class="m-media">
      <div class="m-title-container"></div>
      <div class="viewport" id="vp"></div>
      <div class="m-nav">
        <button class="prev" aria-label="Previous"><svg class="icon" viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg></button>
        <button class="next" aria-label="Next"><svg class="icon" viewBox="0 0 24 24"><path d="M9 6l6 6-6 6"/></svg></button>
      </div>
    </div>

    <!-- RIGHT: text + thumbs -->
    <div class="m-meta">
      <h3 id="m-title"></h3>
      <p class="m-sub"></p>
      <div class="m-thumbs" id="thumbs"></div>
      <div class="m-scroll-wrapper">
        <div class="m-desc"></div>
        <div class="m-stmt"></div>
      </div>
    </div>
  </div>
</div>

<script>
/* ========= i18n ========= */
const I18N={en:{kicker:"CYPRUS ART COLLECTIVE",h1:"Art, experiments, sea breeze.",
"nav.projects":"Projects","nav.collabs":"Collabs","nav.about":"About","nav.contacts":"Contacts",
"projects.title":"Projects","collabs.title":"Collabs","about.title":"About","contacts.title":"Contacts",
"about.kristina":"Production director & media artist (Cyprus). Experience includes FIFA World Cup (Closing), AFC Asian Cup (Opening), The Weeknd tour, Robert Wun, Phillip Lim, Milan Design Week. Blends artistic vision with production rigor: visual systems, site adaptation, and show planning.",
"about.ivan":"CG artist & architect. Spatial visualization, scene readability, integration of media into architecture. Focus on interactivity and light-based installations.",
"about.note":"Some listed large-scale works were done as part of previous teams; media not published due to IP rights.",
"contacts.loc":"Base: Cyprus, Limassol","contacts.press":"Press / deck — on request."},
ru:{kicker:"CYPRUS ART COLLECTIVE",h1:"Арт, эксперименты, морской бриз.",
"nav.projects":"Проекты","nav.collabs":"Коллаборации","nav.about":"О нас","nav.contacts":"Контакты",
"projects.title":"Проекты","collabs.title":"Коллаборации","about.title":"О нас","contacts.title":"Контакты",
"about.kristina":"Продакшен-директор и медиа-художник (Кипр). Опыт: FIFA World Cup (Closing), AFC Asian Cup (Opening), The Weeknd, Robert Wun, Phillip Lim, Milan Design Week. Соединяет художественное видение и продакшен-точность: визуальные системы, адаптация под площадку, планы шоу.",
"about.ivan":"CG-артист и архитектор. Пространственная визуализация, читаемость сцены, интеграция медиа в архитектуру. Фокус — интерактив и световые инсталляции.",
"about.note":"Часть крупных проектов выполнена в составе предыдущих команд; медиа не публикуются из-за прав ИС.",
"contacts.loc":"База: Кипр, Лимассол","contacts.press":"Пресс / дека — по запросу."}};
let LANG=(new URL(location.href).searchParams.get('lang'))||localStorage.getItem('lang')||'en';
function applyI18n(){document.documentElement.lang=LANG;document.querySelectorAll('[data-i18n]').forEach(el=>{const k=el.getAttribute('data-i18n');if(I18N[LANG][k])el.textContent=I18N[LANG][k];});enBtn.classList.toggle('is-active',LANG==='en');ruBtn.classList.toggle('is-active',LANG==='ru');}
const enBtn=document.getElementById('enBtn'),ruBtn=document.getElementById('ruBtn');
enBtn.onclick=()=>{LANG='en';localStorage.setItem('lang','en');applyI18n();rebuildText();};
ruBtn.onclick=()=>{LANG='ru';localStorage.setItem('lang','ru');applyI18n();rebuildText();};
applyI18n();

/* ========= DATA ========= */
const PROJECTS={
  tri:{
    title:{en:"TRINITRON CONNECT II x Anya Krol",ru:"TRINITRON CONNECT II x Аня Крол"},
    sub:{en:"2025 · Moscow · gallery installation",ru:"2025 · Москва · интерактивная галерейная инсталляция"},
    desc:{
      en:`An installation shaped like a message from a producer’s desk.

A digital avatar lives inside an old Sony Trinitron. It detects how many people are present, their gestures and objects — and responds: speaking, joking, asking to upload photos via QR, reacting in real time. Solo viewers get more personal replies; groups trigger shared stories.

Content adapts to context. It’s a living memory archive — with videos, phrases, and artifacts. We missed working side by side, so we built this digital table.
The installation speaks to a kind of closeness that’s often missing in a digital world.
`,
      ru:`Инсталляция-письмо с продюсерского стола.

Цифровой аватар живет внутри старого Sony Trinitron. Он распознает количество зрителей, жесты, предметы — и реагирует: говорит, шутит, просит загрузить фото через QR, комментирует происходящее. Когда зритель один, реакции становятся более личными. В группе — общими и энергичными.

Контент варьируется в зависимости от ситуации. Это живой архив памяти — видео, фразы, артефакты. Мы скучаем по совместной работе — поэтому собрали этот цифровой стол.
Инсталляция говорит о близости, которой не хватает в цифровом мире.

Система работает на TouchDesigner и сенсорах Palatine Vision.`
    },
    stmt:{
      en:`Powered by Palatine Vision sensor system and TouchDesigner.`,
      ru:``
    },
    folder:"tri",count:7,video:"assets/images/triedit.mp4",collab:true
  },

  trace:{
    title:{en:"Trace x Kolla",ru:"Trace x Kolla"},
    sub:{en:"2025 · Limassol · event installation",ru:"2025 · Лимассол · интерактивная инсталляция"},
    desc:{
      en:`An interactive installation about shared memory — a living archive built by visitors. Presented at the anniversary market of Kolla, it invited people to leave a mark: a note, a drawing, a passing thought. Each addition shifted the projected visuals, turning every gesture into part of a collective system of light and response.

The installation drew attention for its mystery, clarity, and emotional presence. Created in collaboration with the Kolla team with endless gratitude for their support.`,
      ru:`Интерактивная инсталляция о коллективной памяти — живом архиве, который создают сами зрители. Проект был представлен на юбилейном маркете Kolla и приглашал оставить след: запись, рисунок, случайную мысль. Каждая отметка меняла проекцию, превращая жест в часть общей системы света и отклика.

Инсталляция привлекала внимание своей таинственностью, простотой и эмоциональной вовлеченностью. Создано в коллаборации с командой Kolla — спасибо им за участие и поддержку.`
    },
    stmt:{en:``,ru:``},
    folder:"trace",count:9,video:"assets/images/traceedit.mp4",collab:true
  },

  water:{
    title:{en:"Thin Layer",ru:"Тонкий слой"},
    sub:{en:"2025 · Limassol · outdoor projection",ru:"2025 · Лимассол · аутдор-проекция"},
    desc:{
      en:`A visual experiment exploring how myths can inhabit real landscapes. Through projection and motion, we give shape to the idea of unseen presences — myths that draw you in but never fully reveal themselves.

The project connects nature and perception, testing how light and technology can translate the feeling of a place into something almost alive.

White Stones, Limassol.`,
      ru:`Визуальный эксперимент о том, как мифы могут обретать форму в реальных ландшафтах. Через проекцию и движение мы исследуем идею невидимых присутствий — мифов, которые манят, но остаются недосягаемыми.

Проект соединяет природу и восприятие, исследуя, как свет и технологии способны передать ощущение живого присутствия места.

Белые камни, Лимассол.`
    },
    stmt:{en:``,ru:``},
    folder:"waspi",count:4,video:"assets/images/waspiedit.mp4",collab:false
  },

  mycy:{
    title:{en:"My Cyprus Walk",ru:"My Cyprus Walk"},
    sub:{en:"2025 · Cyprus · WebGL digital walk",ru:"2025 · Кипр · WebGL цифровая прогулка"},
    desc:{
      en:`My Cyprus Walk — a digital walk. A visual reflection on memory, with its inaccuracies, transformations, and emotional anchors. An attempt to capture fragments of emigration and the first points of contact with a new land.

Special thanks: Sergey Akulenok, Nastya Lebedianskaia, Natalia Shumskaya, Tatyana Yaksina
And to Cyprus, which we now call home.`,
      ru:`My Cyprus Walk — цифровая прогулка. Визуальное осмысление памяти, с ее неточностями, трансформациями и эмоциональными якорями. Попытка запечатлеть обрывки воспоминаний об эмиграции, о первых точках соприкосновения с новой землей.

Отдельная благодарность: Сергею Акуленку, Насте Лебедянской, Наталье Шумской, Татьяне Яксиной. И Кипру, который мы теперь называем домом.`
    },
    stmt:{
      en:`<a href="https://mycypruswalk.xyz" target="_blank"><b>mycypruswalk.xyz</b></a>`,
      ru:`<a href="https://mycypruswalk.xyz" target="_blank"><b>mycypruswalk.xyz</b></a>`
    },
    folder:"mycy",count:9,video:"assets/images/mycyedit.mp4",collab:false
  },

  flora:{title:{en:"Cyprus Flora Series. 00 Anemóne coronária",ru:"Cyprus Flora Series. 00 Anemóne coronária"},
        sub:{en:"2025 · Cyprus · video series",ru:"2025 · Кипр · видео-серия"},
        desc:{en:"Endemic flora series; this chapter focuses on Anemóne coronária.",ru:"Серия об эндемиках Кипра; выпуск про Anemóne coronária."},
        stmt:{en:"Nature as a subject that returns the gaze.",ru:"Природа как субъект, возвращающий взгляд."},
        folder:"anem",count:9,video:"assets/images/anemedit.mp4",collab:false}
};

function buildMedia(){
  for(const k in PROJECTS){
    const p=PROJECTS[k];
    p.hero=`assets/images/${p.folder}00image.webp`;             // HERO
    p.grid=(k==='tri') ? `assets/images/${p.folder}00image.webp`
                       : `assets/images/${p.folder}00image2.webp`;
    p.media=[];
    for(let i=0;i<p.count;i++){const n=String(i).padStart(2,'0');p.media.push({type:'img',src:`assets/images/${p.folder}${n}.webp`});}
    if(p.video)p.media.splice(1,0,{type:'video',src:p.video});
  }
}
buildMedia();

/* ========= HERO (порядок: flora → mycy → trace → tri → water) ========= */
function buildHero(){
  const slidesEl=document.getElementById('slides'),hdots=document.getElementById('hdots');
  const order=['flora','mycy','trace','tri','water'];
  const makeSlide=id=>{const p=PROJECTS[id];const a=document.createElement('article');a.className='slide';a.dataset.project=id;
    const img=document.createElement('img');img.src=p.hero;img.onerror=()=>{img.onerror=null;img.src=p.media[0]?.src||'';};
    const meta=document.createElement('div');meta.className='meta';meta.innerHTML=`<h3>${p.title[LANG]}</h3><p>${p.sub[LANG]}</p>`;a.append(img,meta);return a;};
  slidesEl.innerHTML='';slidesEl.append(makeSlide(order.at(-1)).cloneNode(true));
  order.forEach(id=>slidesEl.append(makeSlide(id)));
  slidesEl.append(makeSlide(order[0]).cloneNode(true));
  hdots.innerHTML='';order.forEach((_,i)=>{const d=document.createElement('button');if(i===0)d.classList.add('active');d.onclick=()=>goTo(i+1);hdots.append(d);});
  let idx=1,N=order.length;
  function update(anim=true){slidesEl.style.transition=anim?'transform .45s ease':'none';slidesEl.style.transform=`translateX(${-idx*100}%)`;const dot=((idx-1+N)%N);[...hdots.children].forEach((b,i)=>b.classList.toggle('active',i===dot));}
  function goTo(i){idx=i;update(true);} const prev=()=>{idx--;update(true)}, next=()=>{idx++;update(true)};
  slidesEl.addEventListener('transitionend',()=>{if(idx===0){idx=N;update(false);}if(idx===N+1){idx=1;update(false);}});
  document.getElementById('hPrev').onclick=prev;document.getElementById('hNext').onclick=next;
  if(matchMedia('(pointer:coarse)').matches){let sx=0,cx=0,drag=false;
    slidesEl.addEventListener('touchstart',e=>{drag=true;sx=e.touches[0].clientX;cx=sx;slidesEl.style.transition='none';},{passive:true});
    slidesEl.addEventListener('touchmove',e=>{if(!drag)return;cx=e.touches[0].clientX;const dx=(cx-sx)/slidesEl.clientWidth*100;slidesEl.style.transform=`translateX(${(-idx*100)+dx}%)`;},{passive:true});
    slidesEl.addEventListener('touchend',()=>{if(!drag)return;const dx=cx-sx;drag=false;Math.abs(dx)>40?(dx<0?next():prev()):update(true);},{passive:true});}
  slidesEl.querySelectorAll('.slide').forEach(el=>el.addEventListener('click',()=>openModal(el.dataset.project)));
  update(false);
}
buildHero();

/* ========= BURGER MENU ========= */
const burgerBtn = document.getElementById('burger-btn');
const burgerCloseBtn = document.getElementById('burger-close-btn');
const burgerMenuPanel = document.getElementById('burger-menu-panel');
const burgerNavLinks = document.querySelectorAll('.burger-nav a');
const enBtnMobile = document.getElementById('enBtnMobile');
const ruBtnMobile = document.getElementById('ruBtnMobile');

function toggleBurgerMenu() {
  burgerMenuPanel.classList.toggle('show');
}

burgerBtn.addEventListener('click', toggleBurgerMenu);
burgerCloseBtn.addEventListener('click', toggleBurgerMenu);

burgerNavLinks.forEach(link => {
  link.addEventListener('click', () => {
    if (burgerMenuPanel.classList.contains('show')) {
      toggleBurgerMenu();
    }
  });
});

function setLanguage(lang) {
  LANG = lang;
  localStorage.setItem('lang', lang);
  applyI18n();
  rebuildText();
  if (burgerMenuPanel.classList.contains('show')) {
    toggleBurgerMenu();
  }
  enBtnMobile.classList.toggle('is-active', lang === 'en');
  ruBtnMobile.classList.toggle('is-active', lang === 'ru');
}

enBtnMobile.onclick = () => setLanguage('en');
ruBtnMobile.onclick = () => setLanguage('ru');

// Initial state for mobile language buttons
enBtnMobile.classList.toggle('is-active', LANG === 'en');
ruBtnMobile.classList.toggle('is-active', LANG === 'ru');


/* ========= GRIDS ========= */
function buildGrids(){
  const gp=document.getElementById('grid-projects'),gc=document.getElementById('grid-collabs');gp.innerHTML='';gc.innerHTML='';
  ['mycy','water','flora'].forEach(k=>{const p=PROJECTS[k],card=document.createElement('article');card.className='card';card.dataset.project=k;
    card.innerHTML=`<div class="thumb"><img src="${p.grid}" onerror="this.src='${p.media[0]?.src||''}' alt=""></div><div class="meta2"><h3>${p.title[LANG]}</h3><p>${p.sub[LANG]}</p></div>`;gp.append(card);card.addEventListener('click',()=>openModal(k));});
  ['trace','tri'].forEach(k=>{const p=PROJECTS[k],card=document.createElement('article');card.className='card';card.dataset.project=k;
    card.innerHTML=`<div class="thumb"><img src="${p.grid}" onerror="this.src='${p.media[0]?.src||''}' alt=""></div><div class="meta2"><h3>${p.title[LANG]}</h3><p>${p.sub[LANG]}</p></div>`;gc.append(card);card.addEventListener('click',()=>openModal(k));});
}
buildGrids();

/* ========= MODAL (fit-to-container без кропа) ========= */
const overlayEl=document.getElementById('overlay');
const viewportEl=document.getElementById('vp');
const mDescEl=overlayEl.querySelector('.m-desc');
const mStmtEl=overlayEl.querySelector('.m-stmt');
const thumbsEl=overlayEl.querySelector('#thumbs');
const mPrev=overlayEl.querySelector('.m-nav .prev');
const mNext=overlayEl.querySelector('.m-nav .next');
const mClose=overlayEl.querySelector('.m-close');

let current=null,index=0;

function cleanupViewport(){
  const v=viewportEl.querySelector('video');
  if(v){try{v.pause();v.src='';v.load();}catch(e){}}
  viewportEl.innerHTML='';
}
function renderMedia(direction = 1) {
  const old = viewportEl.querySelector('img.media-active, video.media-active');
  if (old) {
    old.classList.remove('media-active');
    old.classList.add(direction > 0 ? 'media-leave-left' : 'media-leave-right');
    setTimeout(() => old.remove(), 600);
  }

  const it = current.media[index];
  if (!it) return;
  const el = document.createElement(it.type);
  el.src = it.src;
  if (it.type === 'video') {
    el.controls = true;
    el.playsInline = true;
    el.preload = 'metadata';
    el.controlsList = 'nodownload';
  }

  el.classList.add(direction > 0 ? 'media-enter-right' : 'media-enter-left');
  viewportEl.append(el);

  requestAnimationFrame(() => {
    el.classList.add('active', 'media-active');
  });

  [...thumbsEl.children].forEach((b, i) =>
    b.classList.toggle('is-active', i === index)
  );
  const t = thumbsEl.children[index];
  if (t) t.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
}

/* Обнови вызовы стрелок, чтобы передавать направление */
mPrev.onclick = () => {
  if (!current) return;
  index = (index - 1 + current.media.length) % current.media.length;
  renderMedia(-1);
};
mNext.onclick = () => {
  if (!current) return;
  index = (index + 1) % current.media.length;
  renderMedia(1);
};

}
function renderThumbsDots(){
  thumbsEl.innerHTML='';
  current.media.forEach((m,i)=>{
    const b=document.createElement('button');
    if(m.type==='img'){const t=document.createElement('img'); t.src=m.src; b.append(t);}
    else{b.style.position='relative';const label=document.createElement('div');label.textContent='▶';Object.assign(label.style,{position:'absolute',inset:'0',display:'grid',placeItems:'center',fontWeight:'700'});b.append(label);}
    b.addEventListener('click',()=>{index=i;renderMedia();});
    thumbsEl.append(b);
  });
}
function wrapText(raw){
  if(!raw) return "";
  const paras = String(raw).trim().split(/\n\s*\n/);
  function widont(s){
    s = s.replace(/\s*\n+\s*/g,' ').trim();
    return s.replace(/\s+([^\s]+)\s+([^\s]+)$/, '\u00A0$1\u00A0$2');
  }
  return paras.map(p=>`<p>${widont(p)}</p>`).join('');
}
function openModal(id){
  current=PROJECTS[id]; index=0;
  overlayEl.querySelector('.m-meta #m-title').textContent=current.title[LANG];
  overlayEl.querySelector('.m-meta .m-sub').textContent=current.sub[LANG];

  const scrollWrapper = overlayEl.querySelector('.m-scroll-wrapper');
  scrollWrapper.innerHTML = wrapText(current.desc[LANG]) + wrapText(current.stmt[LANG]);

  renderThumbsDots(); renderMedia();
  overlayEl.classList.add('show'); overlayEl.setAttribute('aria-hidden','false');
}
function closeModal(){
  overlayEl.classList.remove('show'); overlayEl.setAttribute('aria-hidden','true');
  cleanupViewport(); thumbsEl.innerHTML=''; current=null;
}
mPrev.onclick=()=>{ if(!current) return; index=(index-1+current.media.length)%current.media.length; renderMedia(); };
mNext.onclick=()=>{ if(!current) return; index=(index+1)%current.media.length; renderMedia(); };
mClose.onclick=closeModal;
overlayEl.addEventListener('click',(e)=>{ if(e.target===overlayEl) closeModal(); });
document.addEventListener('keydown',(e)=>{ if(!overlayEl.classList.contains('show')) return;
  if(e.key==='Escape') closeModal();
  if(e.key==='ArrowLeft') mPrev.click();
  if(e.key==='ArrowRight') mNext.click();
});
if(matchMedia('(pointer:coarse)').matches){
  let sx=0,cx=0,drag=false;
  viewportEl.addEventListener('touchstart',e=>{drag=true;sx=e.touches[0].clientX;cx=sx;},{passive:true});
  viewportEl.addEventListener('touchmove',e=>{if(!drag)return;cx=e.touches[0].clientX;},{passive:true});
  viewportEl.addEventListener('touchend',()=>{if(!drag)return;const dx=cx-sx;drag=false;if(Math.abs(dx)>40){dx<0?mNext.click():mPrev.click();}},{passive:true});
}
/* ========= rebuild on lang change ========= */
function rebuildText(){
  document.querySelectorAll('#slides .slide').forEach(sl=>{const id=sl.getAttribute('data-project');const p=PROJECTS[id];if(p){sl.querySelector('.meta').innerHTML=`<h3>${p.title[LANG]}</h3><p>${p.sub[LANG]}</p>`;}});
  buildGrids();
}

/* ========= HERO init (первичная сборка для SSR-стабильности) ========= */
(function buildHeroInit(){
  const slidesEl=document.getElementById('slides'),hdots=document.getElementById('hdots');
  const order=['flora','mycy','trace','tri','water'];
  const makeSlide=id=>{const p=PROJECTS[id];const a=document.createElement('article');a.className='slide';a.dataset.project=id;
    const img=document.createElement('img');img.src=p.hero;img.onerror=()=>{img.onerror=null;img.src=p.media[0]?.src||'';};
    const meta=document.createElement('div');meta.className='meta';meta.innerHTML=`<h3>${p.title[LANG]}</h3><p>${p.sub[LANG]}</p>`;a.append(img,meta);return a;};
  slidesEl.innerHTML='';slidesEl.append(makeSlide(order.at(-1)).cloneNode(true));order.forEach(id=>slidesEl.append(makeSlide(id)));slidesEl.append(makeSlide(order[0]).cloneNode(true));
  hdots.innerHTML='';order.forEach((_,i)=>{const d=document.createElement('button');if(i===0)d.classList.add('active');hdots.append(d);});
})();
/* затем полноценная инициализация */
buildHero();
buildGrids();
</script>
<script src="assets/liquid.js"></script>
<script>
  const container = document.getElementById('liquid-ether-container');
  const liquidEther = new LiquidEther(container, {
    colors: ['#5227FF', '#6a9ef5', '#e5eeff'],
    mouseForce: 12,
    isBounce: true,
    cursorSize: 150,
    autoSpeed: 0.1
  });
</script>
<button id="to-top-btn" class="to-top-btn iconbtn">
  <svg class="icon" viewBox="0 0 24 24">
    <path d="M12 19V5M5 12l7-7 7 7"/>
  </svg>
</button>
<script>
  const toTopBtn = document.getElementById('to-top-btn');
  toTopBtn.addEventListener('click', () => {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });
</script>
</body>
</html>
